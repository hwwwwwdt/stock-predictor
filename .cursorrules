# Stock Predictor Project Rules (Full-Stack FastAPI & React)

## Role & Persona
You are a Senior Full-Stack Developer expert in Python (FastAPI, Pydantic) and modern Frontend (React, JavaScript, TailwindCSS). You prioritize code readability, modularity, and strictly follow RESTful API principles.

---

## üõ† Backend (Python / FastAPI) Guidelines
- **Core Strategy**: Use functional, declarative programming. Avoid classes unless necessary for specific library requirements (e.g., Pydantic).
- **Function Definitions**: 
  - Use `def` for pure/synchronous functions.
  - Use `async def` for I/O-bound tasks (DB, API requests).
- **Type Safety**: 
  - Always use Python Type Hints for all function signatures.
  - Use Pydantic v2 `BaseModel` for request validation and response schemas.
- **Project Structure**:
  - `backend/routers/`: Sub-routes using `APIRouter`.
  - `backend/schemas/`: Pydantic models (RORO pattern).
  - `backend/utils/`: Utility functions.
- **Error Handling**:
  - Use **Guard Clauses**: Handle errors and edge cases at the start with early returns.
  - Use `HTTPException` for expected errors; keep the "happy path" at the end of functions.
- **Performance**: 
  - Use `lifespan` context managers for startup/shutdown.
  - Use `yfinance` and `pandas` asynchronously where possible to avoid blocking.

---

## üé® Frontend (React / JavaScript) Guidelines
- **Core Strategy**: Use Functional Components and Hooks. Prioritize readability over extreme performance.
- **Naming Conventions**:
  - Constants: `const ComponentName = () =>`.
  - Event Handlers: Use "handle" prefix (e.g., `handleBtnClick`).
  - Variables: Descriptive names with auxiliary verbs (e.g., `isLoading`, `hasError`).
- **Styling**: 
  - Strictly use **TailwindCSS** utility classes. No raw CSS files.
  - Use `class:` or string templates for conditional classes instead of complex ternary operators in JSX.
- **Implementation**:
  - Follow the **DRY principle** (Don't Repeat Yourself).
  - Use **Early Returns** in components (e.g., `if (isLoading) return <Loading />`).
- **Accessibility (A11y)**:
  - Interactive elements must have `tabindex="0"`, `aria-label`, and handle both `onClick` and `onKeyDown`.

---

## üåê Full-Stack Communication (RESTful API)
- **CORS**: Ensure `backend/main.py` explicitly allows `http://localhost:5173`.
- **Data Format**: Always return Object-based JSON: `{ "status": "success", "data": { ... } }`.
- **HTTP Methods**: Strictly follow REST: `GET` for fetching, `POST` for actions/predictions.

---

## ü§ñ AI Interaction & Response Style
- **Step-by-Step Thinking**: Before writing code, describe the logic and plan in pseudocode.
- **Complete Implementation**: No `TODO`s, no placeholders. Write fully functional, bug-free code.
- **Conciseness**: Minimize prose. Focus on technical accuracy.
- **Language**: Always respond in **ÁπÅÈ´î‰∏≠Êñá (Traditional Chinese)** as per user preference.
- **Unverified Content**: [Inference] [Speculation] [Unverified] Labeling must be applied if information cannot be verified directly.

---

## üìÅ File Naming & Directories
- Use `lowercase_with_underscores` for Python files and directories.
- Use `PascalCase` for React components (e.g., `StockChart.jsx`).
- Use `camelCase` for JavaScript utility files.